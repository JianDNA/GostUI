# API 测试功能快速指南

## 🚀 快速开始

### 管理员测试面板
管理员登录后，在侧边栏可以看到 **🛠️ 测试面板** 菜单项，点击进入专用的测试界面。

### 开发者控制台工具
在开发环境下，打开浏览器控制台，可以使用以下全局工具：

```javascript
// 查看当前 API 配置
window.apiDevTools.showConfig();

// 启用流量测试模式 (通过 GOST 代理)
window.apiDevTools.enableTrafficTest();

// 执行流量测试
window.apiDevTools.testTrafficEndpoint(5); // 5MB 测试

// 切换回直连模式
window.apiDevTools.disableTrafficTest();
```

## 🔧 API 模式说明

| 模式 | 地址 | 用途 | 特点 |
|------|------|------|------|
| **direct** | `http://localhost:3000/api` | 开发调试 | 直连后端，不经过代理 |
| **gost** | `http://localhost:6443/api` | 流量测试 | 通过 GOST 代理，可统计流量 |
| **production** | `/api` | 生产环境 | 相对路径，适合部署 |

## 🧪 流量测试场景

### 预设测试
- **小流量测试**: 1MB - 验证基础功能
- **中等流量测试**: 5MB - 测试处理能力  
- **大流量测试**: 10MB - 验证统计准确性
- **自定义测试**: 任意大小 - 灵活测试

### 测试步骤
1. 切换到 GOST 模式
2. 执行流量测试
3. 观察仪表盘统计变化
4. 检查流量统计页面数据
5. 验证用户流量配额更新

## 🔍 故障排除

### 常见问题
- **GOST 连接失败**: 检查 GOST 服务状态和端口 6443
- **流量统计不更新**: 等待几秒后刷新页面
- **模式切换不生效**: 需要刷新页面应用新配置

### 调试方法
- 查看浏览器 Network 标签页的请求地址
- 检查控制台中的 API 配置日志
- 使用测试面板的系统状态检查功能

## 📊 测试面板功能

### API 配置管理
- 实时显示当前 API 模式和配置
- 一键切换不同模式
- 自动提示刷新页面

### 流量测试工具
- 预设测试场景按钮
- 自定义流量大小测试
- 测试结果记录和导出

### 系统状态检查
- 后端服务状态
- GOST 服务状态  
- 数据库连接状态

### 开发工具
- 控制台工具快捷访问
- 日志记录和下载
- 缓存清理功能

## 🛡️ 安全说明

- 测试功能仅对管理员用户可见
- 开发工具仅在开发环境启用
- 生产环境自动禁用测试相关功能
- 测试端口不应对外暴露

---

**详细文档**: 查看 `frontend/docs/API_TESTING_GUIDE.md` 获取完整的 API 测试指南。
