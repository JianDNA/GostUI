const t={direct:{baseURL:"/api",description:"直连后端服务 (不经过 GOST)",useFor:"开发调试"},gost:{baseURL:"http://localhost:6443/api",description:"通过 GOST 端口 6443 代理",useFor:"流量统计测试"},production:{baseURL:"/api",description:"生产环境相对路径",useFor:"生产部署"}},e=()=>{if({}.VITE_API_MODE){const e={}.VITE_API_MODE;if(t[e])return t[e]}const e=localStorage.getItem("api_mode");if(e&&t[e])return t[e];return t.production},i=(e,i=!1)=>!!t[e]&&(localStorage.setItem("api_mode",e),!0),s=()=>{const i=e();return{mode:Object.keys(t).find((e=>t[e].baseURL===i.baseURL)),config:i,allModes:t}},o=e(),r=o.baseURL,n=o,c={endpoints:{status:"/test/status",help:"/test/help",traffic1mb:"/test/traffic-1mb",traffic5mb:"/test/traffic-5mb",traffic10mb:"/test/traffic-10mb",trafficCustom:"/test/traffic-custom"},testScenarios:[{name:"小流量测试",endpoint:"/test/traffic-1mb",expectedSize:"1 MB",description:"测试基础流量统计功能"},{name:"中等流量测试",endpoint:"/test/traffic-5mb",expectedSize:"5 MB",description:"测试中等流量处理能力"},{name:"大流量测试",endpoint:"/test/traffic-10mb",expectedSize:"10 MB",description:"测试大流量统计准确性"},{name:"自定义流量测试",endpoint:"/test/traffic-custom?size=2.5",expectedSize:"2.5 MB",description:"测试自定义大小流量"}]},a={showConfig:()=>s(),enableTrafficTest:()=>{const t=i("gost");return t},disableTrafficTest:()=>{const t=i("direct");return t},testTrafficEndpoint:(t=1)=>{return e=void 0,i=null,s=function*(){try{const e=`${r}/test/traffic-custom?size=${t}`,i=yield fetch(e);return yield i.json()}catch(e){return null}},new Promise(((t,o)=>{var r=t=>{try{c(s.next(t))}catch(e){o(e)}},n=t=>{try{c(s.throw(t))}catch(e){o(e)}},c=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,n);c((s=s.apply(e,i)).next())}));var e,i,s}},f={API_BASE_URL:r,API_CONFIG:n,TRAFFIC_TEST_CONFIG:c,switchApiMode:i,getApiModeInfo:s,devTools:a};export{r as API_BASE_URL,n as API_CONFIG,c as TRAFFIC_TEST_CONFIG,f as default,a as devTools,s as getApiModeInfo,i as switchApiMode};
